<!DOCTYPE html>
<html>
<head>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <title>Prediction Result</title>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='style.css') }}">
    <style>
        .healthy-message {
            color: green;
            font-size: 1.2em;
            margin-top: 20px;
        }
        .error-message {
            color: red;
            font-size: 1.2em;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div id="branding">
                <h1><span class="highlight">Diabetic Retinopathy</span> Classifier</h1>
            </div>
        </div>
    </header>

    <div class="container">
        <img src="{{ image_url }}" alt="Uploaded Image" class="image-preview">
        <div>{{ data|safe }}</div>
    </div>
    <!-- Canvas for Chart.js -->
    <div style="width:60%; margin: 20px auto;">
        <canvas id="probabilityChart"></canvas>
    </div>

    <script>
        var ctx = document.getElementById('probabilityChart').getContext('2d');
        var probabilityChart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: {{ categories | tojson | safe }},
                datasets: [{
                    label: 'Probability',
                    data: {{ probabilities | tojson | safe }},
                    backgroundColor: 'rgba(75, 192, 192, 0.6)',
                    borderColor: 'rgba(75, 192, 192, 1)',
                    borderWidth: 1
                }]
            },
            options: {
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });
    </script>
    {% if health_message %}
        <p class="healthy-message">{{ health_message }}</p>
    {% endif %}
    <!-- Go Back Button -->
    <a href="/" class="go-back-btn">Go Back</a>
</body>
</html>